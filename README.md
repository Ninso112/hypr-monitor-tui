# hypr-monitor-tui

<p align="center">
  <strong>A beautiful TUI for Hyprland multi-monitor configuration</strong>
</p>

<p align="center">
  <a href="#features">Features</a> •
  <a href="#installation">Installation</a> •
  <a href="#usage">Usage</a> •
  <a href="#keybindings">Keybindings</a> •
  <a href="#configuration">Configuration</a> •
  <a href="#contributing">Contributing</a> •
  <a href="#license">License</a>
</p>

<p align="center">
  <img src="https://img.shields.io/github/license/yourusername/hypr-monitor-tui?style=flat-square" alt="License">
  <img src="https://img.shields.io/github/v/release/yourusername/hypr-monitor-tui?style=flat-square" alt="Release">
  <img src="https://img.shields.io/github/actions/workflow/status/yourusername/hypr-monitor-tui/ci.yml?style=flat-square" alt="Build Status">
  <img src="https://img.shields.io/badge/hyprland-compatible-blue?style=flat-square" alt="Hyprland Compatible">
</p>

---

## Features

- **Visual Monitor Placement** – Position monitors in a visual grid
- **Live Configuration** – Apply changes via Hyprland IPC
- **Resolution Management** – Select from available resolutions per monitor
- **Refresh Rate Control** – Configure Hz for each display
- **Scaling Support** – Adjust scale from 0.5x to 3.0x
- **Transform/Rotation** – Rotate and flip monitors
- **Profile System** – Save and load monitor configurations
- **Config Export** – Export to hyprland.conf format
- **TUI** – Clean terminal interface

## Installation

### Build from Source

```bash
git clone https://github.com/yourusername/hypr-monitor-tui.git
cd hypr-monitor-tui
cargo build --release
```

The binary will be at `target/release/hypr-monitor-tui`. Run it with:

```bash
./target/release/hypr-monitor-tui
```

Optionally, copy or symlink the binary into a directory in your PATH, e.g.:

```bash
sudo cp target/release/hypr-monitor-tui /usr/local/bin/
```

### Requirements

- Hyprland (running)
- Rust 1.70+ (for building)
- Terminal with Unicode support

## Usage

### Interactive Mode (Default)

```bash
hypr-monitor-tui
```

### CLI Options

```bash
hypr-monitor-tui [OPTIONS]

Options:
  -c, --config <PATH>    Path to config file [default: ~/.config/hypr-monitor-tui/config.toml]
  -a, --apply <PROFILE>  Apply a saved profile directly
  -e, --export           Export current configuration to stdout
  -l, --list-profiles    List all saved profiles
  -d, --dry-run          Show what would be applied without executing
  -v, --verbose          Enable verbose logging
  -h, --help             Print help
  -V, --version          Print version
```

### Examples

```bash
hypr-monitor-tui
hypr-monitor-tui --apply gaming
hypr-monitor-tui --export > monitors.conf
hypr-monitor-tui --apply docked --dry-run
```

## Keybindings

### Navigation

| Key | Action |
|-----|--------|
| `↑` / `k` | Select previous monitor |
| `↓` / `j` | Select next monitor |
| `Tab` | Switch between grid and settings panel |
| `Shift+Tab` | Switch in reverse |

### Actions

| Key | Action |
|-----|--------|
| `Enter` / `e` | Edit selected monitor settings |
| `m` | Enter move mode |
| `Space` | Toggle primary monitor |
| `d` | Enable/disable monitor |
| `r` | Cycle through rotations |

### Global

| Key | Action |
|-----|--------|
| `a` | Apply changes (live) |
| `s` | Save to config file |
| `x` | Export as hyprland.conf snippet |
| `p` | Open profile manager |
| `u` | Undo last change |
| `R` | Reset to current Hyprland config |
| `?` | Show help |
| `q` | Quit (prompts if unsaved changes) |

## Configuration

hypr-monitor-tui stores configuration in `~/.config/hypr-monitor-tui/`:

```
~/.config/hypr-monitor-tui/
├── config.toml      # Main configuration
└── profiles/        # Saved monitor profiles
```

### config.toml

```toml
[general]
auto_apply = false
preview_timeout = 10
scale_step = 0.25

[theme]
accent = "#7aa2f7"
accent_secondary = "#bb9af7"
success = "#9ece6a"
warning = "#e0af68"
error = "#f7768e"

[keybindings]
quit = "q"
apply = "a"
save = "s"
```

### Profile Format

```toml
# ~/.config/hypr-monitor-tui/profiles/gaming.toml
name = "Gaming Setup"
description = "144Hz on primary"

[[monitors]]
name = "DP-1"
resolution = "2560x1440"
refresh_rate = 144.0
position = [0, 0]
scale = 1.0
transform = "normal"
enabled = true
primary = true
```

## Generated Hyprland Config

```conf
# Generated by hypr-monitor-tui
monitor=DP-1,2560x1440@144.00,0x0,1.0
monitor=HDMI-A-1,1920x1080@60.00,2560x0,1.0
```

## Troubleshooting

### hypr-monitor-tui can't connect to Hyprland

Ensure Hyprland is running and `HYPRLAND_INSTANCE_SIGNATURE` is set:

```bash
echo $HYPRLAND_INSTANCE_SIGNATURE
```

### Changes don't persist after reboot

Export and add to your hyprland.conf:

```bash
hypr-monitor-tui --export >> ~/.config/hypr/hyprland.conf
```

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md).

```bash
cargo run
cargo test
cargo clippy -- -D warnings
cargo fmt
```

## License

GNU General Public License v3.0 – see [LICENSE](LICENSE).

## Acknowledgments

- [Hyprland](https://hyprland.org/)
- [ratatui](https://github.com/ratatui-org/ratatui)
- [hyprland-rs](https://github.com/hyprland-community/hyprland-rs)
